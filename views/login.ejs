<!DOCTYPE html>
<html lang="en">
    <%- include('./partials/head.ejs') %>

    <body>
        <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
            <a href="#"><img src="/logo.png" alt="" class="logo"></a>
            <button
                class="navbar-toggler"
                type="button"
                data-toggle="collapse"
                data-target="#navbarSupportedContent"
                aria-controls="navbarSupportedContent"
                aria-expanded="false"
                aria-label="Toggle navigation"
            >
                <span class="navbar-toggler-icon"></span>
            </button>
      
            <div class="collapse navbar-collapse" id="navbarSupportedContent">
                <ul class="navbar-nav mx-auto">
                    <!-- <li class="nav-item">
                        <a class="nav-link" href="/">Home</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#">About</a>
                    </li> -->
                    <li class="text-light h4">Virtual Trading App</li>
                </ul>
                <div>
                    <!-- <a href="/login" class="btn btn-primary mr-2">Login</a>
                    <a href="/register" class="btn btn-primary">Register</a> -->
                    <a href="/register" class="btn btn-primary">Register</a>
                </div>
            </div>
        </nav>
        
        <form class="login-form my-5 mx-auto border p-5 rounded" action="/login" method="POST">
          <h1 class="text-center">Login</h1>
          <div class="form-group">
            <label for="login-email">Email ID</label>
            <input type="email" class="form-control" id="login-email" placeholder="Enter Email ID" name="email">
          </div>
          <div class="form-group">
            <label for="login-password">Password</label>
            <input type="password" class="form-control" id="login-password" placeholder="Enter password" name="password">
          </div>
          <!-- <div class="form-check mb-2">
            <input type="checkbox" class="form-check-input" id="exampleCheck1">
            <label class="form-check-label" for="exampleCheck1">Remember Me</label>
          </div> -->
          <div class="login-buttons">
            <div onclick="loginSubmit()" class="btn btn-dark">Login</div>
            <!-- <a href="/register" class="text-danger">Register</a> -->
          </div>
          <div class="errorDiv text-danger"></div>
        </form>
        <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
        <script>
            try {
                console.log("trying");
                document.getElementsByClassName("errorDiv")[0].textContent = '<%= errorText %>';
            }
            catch(err) {
                console.log(err);
            }

         
            function loginSubmit() {
                console.log("submit function run")
                let error = "";
                let inputs = document.getElementsByTagName("input")
                for(var i = 0; i < inputs.length; i++) {
                    if(inputs[i].value === ""){
                        inputs[i].style.borderColor = "red";
                        error = "*Please fill all the fields."
                        document.getElementsByClassName("errorDiv")[0].textContent = error;
                    }else{
                        inputs[i].style.borderColor = "#dddddd";
                        
                    }
                }

                if(error == ""){
                    // console.log(document.getElementsByClassName("login-form")[0]);
                    document.getElementsByClassName("login-form")[0].submit();

                }else {
                    console.log(error);
                }
            }
        </script>
    </body>
</html>
